@*
	For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
	ViewData["Title"] = "Locations";
}

<ul class="nav nav-tabs" id="tabs" role="tablist">
	<li class="nav-item" role="presentation">
		<a class="nav-link active" id="address-tab" data-toggle="tab" href="#address-content" role="tab" aria-controls="address" aria-selected="true">Address</a>
	</li>
	<li class="nav-item" role="presentation">
		<a class="nav-link" id="country-tab" data-toggle="tab" href="#country-content" role="tab" aria-controls="address" aria-selected="true">Country</a>
	</li>
	<li class="nav-item" role="presentation">
		<a class="nav-link" id="state-tab" data-toggle="tab" href="#state-content" role="tab" aria-controls="address" aria-selected="true">State</a>
	</li>
	<li class="nav-item" role="presentation">
		<a class="nav-link" id="city-tab" data-toggle="tab" href="#city-content" role="tab" aria-controls="city" aria-selected="true">City</a>
	</li>
</ul>
<div class="tab-content" id="tab-contents">
	<div class="tab-pane fade show active" id="address-content" role="tabpanel" aria-labelledby="address-tab">
		<br />
		<div>

			<!-- Add form -->
			<form id="add" action="/@ViewBag.Controller/@ViewBag.AddMethod" method="post" class="">
				<h4>Add @ViewBag.Title</h4>

				<div class="form-group">
					<label for="name">Name</label>
					<input type="text" id="name" class="form-control" name="name" />
				</div>

				<div class="form-group">
					<label for="address">Address</label>
					<input type="text" id="address" class="form-control" name="address" />
				</div>

				<div class="form-group">
					<label for="country">Country</label>
					<select class="form-control" id="country" name="country">
					@foreach (Country country in ViewBag.Countries)
					{

					}
					</select>
				</div>

				<div class="form-group">
					<label for="state">State</label>
					<input type="text" id="state" class="form-control" name="state" />
				</div>

				<div class="form-group">
					<label for="city">City</label>
					<input type="text" id="city" class="form-control" name="city" />
				</div>

				<div class="form-group">
					<label for="street">Street</label>
					<input type="text" id="street" class="form-control" name="street" />
				</div>

				<div class="form-group">
					<label for="zipCode">Zip Code</label>
					<input type="text" id="zipCode" class="form-control" name="zipCode" />
				</div>

				<button class="btn btn-primary">Add</button>
			</form>

			<!-- Edit form -->
			<form id="edit" action="/@ViewBag.Controller/@ViewBag.EditMethod" method="post" class="d-none">
				<h4>Edit @ViewBag.Title</h4>
				<input type="hidden" id="id" name="id" value="" />

				<div class="form-group">
					<label for="name">Name</label>
					<input type="text" id="name" class="form-control" name="name" />
				</div>

				<div class="form-group">
					<label for="address">Address</label>
					<input type="text" id="address" class="form-control" name="address" />
				</div>

				<div class="form-group">
					<label for="country">Country</label>
					<input type="text" id="country" class="form-control" name="country" />
				</div>

				<div class="form-group">
					<label for="state">State</label>
					<input type="text" id="state" class="form-control" name="state" />
				</div>

				<div class="form-group">
					<label for="city">City</label>
					<input type="text" id="city" class="form-control" name="city" />
				</div>

				<button class="btn btn-primary">Edit</button>
				<button id="cancel" class="btn btn-danger">Cancel</button>
			</form>

		</div>

		<hr />

		<h4>@ViewData["Title"]</h4>

		<div>
			<table id="table" class="table table-striped table-bordered table-hover">
				<thead class="thead-dark">
					<tr align="center">
						<th>Name</th>
						<th>Address</th>
						<th>Country</th>
						<th>City</th>
						<th>Street</th>
						<th>Zip Code</th>
						<th>Edit</th>
						<th>Delete</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var da in ViewBag.Data)
					{
						<tr>
							<td>@da.Name</td>
							<td>@da.Address</td>
							<td>@da.Country</td>
							<td>@da.City</td>
							<td>@da.Street</td>
							<td>@da.ZipCode</td>
							<td align="center">
								<button type="button" class="edit-data btn btn-primary" onclick="Edit('@da.ID','@da.Name');">
									@Html.Partial("_IconEdit")
								</button>
							</td>
							<td align="center">
								<button type="button" class="delete-data btn btn-primary" onclick="Delete('@da.ID','@da.Name')">
									@Html.Partial("_IconDelete")
								</button>
							</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
	</div>
	<div class="tab-pane fade" id="country-content" role="tabpanel" aria-labelledby="address-tab">

	</div>
	<div class="tab-pane fade" id="state-content" role="tabpanel" aria-labelledby="state-tab">

	</div>
	<div class="tab-pane fade" id="city-content" role="tabpanel" aria-labelledby="city-tab">

	</div>
</div>


<link type="text/css" rel="stylesheet" href="//cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" />
<script type="text/javascript" src="//cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>

<script type="text/javascript">
	function Edit(id, name, code) {
		$("#id").val(id);
		$("#edit #name").val(name);
		$("#edit").removeClass("d-none");
		$("#add").addClass("d-none");
	}
	$("#cancel").click(function (e) {
		e.preventDefault();
		$("#add").removeClass("d-none");
		$("#edit").addClass("d-none");
	});
	function Delete(ID, Name) {
		if (confirm(`Delete ${Name}?`)) {
			window.location = `/@ViewBag.Controller/@ViewBag.DeleteMethod/${ID}`;
		}
	}
	$("#table").DataTable({
		scrollY: '400px',
		scrollCollapse: true,
		paging: true
	});
</script>